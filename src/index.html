<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <title>Ego Manager</title>
        <link rel="stylesheet" href="node_modules/normalize.css/normalize.css" />
        <link rel="stylesheet" href="node_modules/bootstrap/dist/css/bootstrap.css" />
        <link rel="stylesheet" href="app.css" />

        <script src="view.js"></script>
    </head>
    <body>
        <div class="mycontainer">
            <div class="mynavbarContainer">
                <ul class="mynavbar" data-bind="foreach: views">
                    <li
                        data-bind="text: $data, css: { selected: $data == $root.chosenViewId() }, click: $root.goToView"
                    ></li>
                </ul>
            </div>
            <div class="myInnerContainer" data-bind="visible: chosenViewId() == views[0]">
                <h1>Welcome to the Configuration Builder.</h1>
            </div>
            <div class="myInnerContainer container" data-bind="visible: chosenViewId() == views[1]">
                <h1>Welcome to the File Database.</h1>
                <button data-bind="click: reloadFiles()">Reload Files</button>
                <div class="row">
                    <div class="col-md-3">
                        <h3>Iwads</h3>
                        <ul data-bind="foreach: iwads">
                            <li
                                data-bind="text: displayName, css: { error: error(), warning: ((!error())&&(warning()))}"
                            ></li>
                        </ul>
                    </div>
                    <div class="col-md-3">
                        <h3>Pwads</h3>
                        <input data-bind="textInput: pwadSearch, event: { keyup: findPwad()}" /><br>
                        <ul data-bind="foreach: pwads">
                            <li
                                data-bind="text: displayName, css: { error: error(), warning: ((!error())&&(warning()))}"
                            ></li>
                        </ul>
                    </div>
                    <div class="col-md-3">
                        <h3>Sourceports</h3>
                        
                        <ul data-bind="foreach: sourceports">
                            <li
                                data-bind="text: displayName, css: { error: error(), warning: ((!error())&&(warning()))}"
                            ></li>
                        </ul>
                    </div>
                    <div class="col-md-3">
                        <h3>Sourceport Configs</h3>
                        <ul data-bind="foreach: sourceportConfigs">
                            <li
                                data-bind="text: displayName, css: { error: error(), warning: ((!error())&&(warning()))}"
                            ></li>
                        </ul>
                    </div>
                </div>
                <div class="row"></div>
            </div>
            <div class="myInnerContainer" data-bind="visible: chosenViewId() == 'info'">
                <h1>Hello World!</h1>
                We are using node <span data-bind="text: nodeVersion"></span>
                <br />
                Chrome <span data-bind="text: chromeVersion"></span>
                <br />
                and Electron <span data-bind="text: electronVersion"></span>. <br /><br />
                You'll find the idTech folder in <span data-bind="text: idTechFolder"></span>
                <br />
                <button data-bind="click: ()=>{ files([]); walk(idTechFolder)}">Click to read in folders</button><br />
                Here's all the files:<br />
                <div data-bind="foreach:files">
                    <div data-bind="text: $data"></div>
                </div>
                <br />
                And just to reiterate, their directories are:<br />
                Sourceports: <span data-bind="text: sourceportDirectory"></span>
                <br />
                Iwads: <span data-bind="text: iwadDirectory"></span>
                <br />
                Pwads: <span data-bind="text: pwadDirectory"></span>
            </div>
            <div class="myInnerContainer" data-bind="visible: chosenViewId() == views[3]">
                <h1>Name Manipulation Example</h1>
                <p>First name: <strong data-bind="text: firstName">todo</strong></p>
                <p>Last name: <strong data-bind="text: lastName">todo</strong></p>
                <p>First name: <input data-bind="value: firstName" /></p>
                <p>Last name: <input data-bind="value: lastName" /></p>
                <p>Full name: <strong data-bind="text: fullName"></strong></p>
                <button data-bind="click: capitalizeLastName">Go caps</button>
            </div>
            <div class="myInnerContainer" data-bind="visible: chosenViewId() == views[4]">
                <h1>Seat reservation example</h1>
                <h2>Your seat reservations (<span data-bind="text: seats().length"></span>)</h2>

                <table>
                    <thead>
                        <tr>
                            <th>Passenger name</th>
                            <th>Meal</th>
                            <th>Surcharge</th>
                            <th></th>
                        </tr>
                    </thead>

                    <tbody data-bind="foreach: seats">
                        <tr>
                            <td><input data-bind="value: name" /></td>
                            <td>
                                <select
                                    data-bind="options: $root.availableMeals, value: meal, optionsText: 'mealName'"
                                ></select>
                            </td>
                            <td data-bind="text: formattedPrice"></td>
                            <td><a href="#" data-bind="click: $root.removeSeat">Remove</a></td>
                        </tr>
                    </tbody>
                </table>
                <button data-bind="click: addSeat, enable: seats().length < 5">Reserve another seat</button>
                <h3 data-bind="visible: totalSurcharge() > 0">
                    Total surcharge: $<span data-bind="text: totalSurcharge().toFixed(2)"></span>
                </h3>
            </div>
            <div
                class="myInnerContainer"
                data-bind="visible: chosenViewId() == views[views.length-1] || chosenViewId() == views[views.length-2]"
            >
                <table class="tabular" data-bind="with: chosenViewData">
                    <thead>
                        <tr>
                            <th>From</th>
                            <th>To</th>
                            <th>Subject</th>
                            <th>Date</th>
                        </tr>
                    </thead>
                    <tbody data-bind="foreach: mails">
                        <tr>
                            <td data-bind="text: from"></td>
                            <td data-bind="text: to"></td>
                            <td data-bind="text: subject"></td>
                            <td data-bind="text: date"></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </body>
</html>
