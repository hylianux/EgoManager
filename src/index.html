<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8" />
    <title>Ego Manager</title>
    <link rel="stylesheet" href="node_modules/font-awesome/css/font-awesome.css" />
    <link rel="stylesheet" href="app.css" />
    <script>
        window.$ = window.jQuery = require('jquery');
        window.Bootstrap = require('bootstrap');
    </script>
    <link rel="stylesheet" href="bootstrap.css" />
    <script src="view.js"></script>
</head>

<body>
    <div class="container-fluid">
        <ul class="nav nav-tabs justify-content-center">
            <li class="nav-item">
                <a class="nav-link active" data-toggle="tab" href="#configBuilder">Configuration Builder</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-toggle="tab" href="#fileDB">
                    File Database &nbsp;&nbsp;
                    <i data-toggle="tooltip" data-bind="click: loadCollections.bind($data, true)"
                        title="Click to reload files" class="fa fa-refresh"></i>
                    &nbsp;&nbsp;
                    <i data-toggle="tooltip" title="Show/Hide Hidden Files"
                        data-bind="class: showHiddenFiles()?'fa fa-eye-slash':'fa fa-eye', click: showHiddenFiles.bind($data, !showHiddenFiles())"></i>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-toggle="tab" href="#info">Info</a>
            </li>
        </ul>
        <div class="tab-content">
            <div class="tab-pane container active" id="configBuilder">
                <h1>Welcome to the Configuration Builder.</h1>
            </div>
            <div class="tab-pane container-fluid fade" id="fileDB">
                <div class="row">
                    <div class="col-md-4.0 border border-secondary">
                        <ul class="nav nav-tabs">
                            <li class="nav-item">
                                <a class="nav-link active" data-toggle="tab" data-bind="click: clearFileEdit()"
                                    href="#Iwads">
                                    Iwads
                                    <sup data-toggle="tooltip"
                                        title="Iwads are the actual game's binaries, usually stored in a .wad file, but sometimes stored in a .pk3 file. This is where you'd put your Doom, Doom 2, Heretic, Hexen, etc. games">
                                        ?
                                    </sup>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" data-toggle="tab" data-bind="click: clearFileEdit()" href="#Pwads">
                                    Pwads
                                    <sup data-toggle="tooltip"
                                        title="Pwads, or 'Patch Wads' are mods.  These could be levels, music, gameplay... these are loaded alongside an iwad.  File extensions include .wad, .deh, .bex, and .pk3">
                                        ?
                                    </sup>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" data-toggle="tab" data-bind="click: clearFileEdit()"
                                    href="#Sourceports">
                                    Sourceports
                                    <sup data-toggle="tooltip"
                                        title="The engine that runs an iwad (along with, optionally, pwads).">
                                        ?
                                    </sup>
                                </a>
                            </li>
                        </ul>
                        <div class="tab-content">
                            <div class="tab-pane container-fluid active" id="Iwads">
                                <div class="form-group">
                                    <input type="text" class="form-control" placeholder="Search..."
                                        data-bind="textInput: iwadSearch, event: { keyup: findIwad()}" />
                                </div>
                                <div class="list-group" data-bind="foreach: files.iwads">
                                    <span class="list-group-item list-group-item-action clearfix" data-placement="right"
                                        data-html="true"
                                        data-bind="tooltip: tooltip(), class: displayClass, hidden: $parent.showHiddenFiles()===false && hidden()===true">
                                        <span class="pull-left" data-bind="text: displayName"></span>
                                        <span class="pull-right">
                                            <span class="btn btn-xs btn-secondary"
                                                data-bind="click: $parent.editFile.bind($data, type, $index)">
                                                <span class="fa fa-edit"></span>
                                            </span>
                                            <span class="btn btn-xs btn-secondary" data-bind="click: hideFile">
                                                <span data-bind="class: hideFileClass" aria-hidden="true"></span>
                                            </span>
                                        </span>
                                    </span>
                                </div>
                                <div data-bind="hidden: files.iwads().length>0 || iwadsAllHidden()==false">
                                    No Iwads to display. It could be due to your search criteria, hidden files (you
                                    can click "show hidden files" to see them), or if you just copied files into the
                                    idTech folder, click the File Database tab to reload.
                                </div>
                            </div>
                            <div class="tab-pane container-fluid fade" id="Pwads">
                                <div class="form-group">
                                    <input type="text" class="form-control" placeholder="Search..."
                                        data-bind="textInput: pwadSearch, event: { keyup: findPwad()}" />
                                </div>
                                <div class="list-group" data-bind="foreach: files.pwads">
                                    <span class="list-group-item list-group-item-action" data-placement="right"
                                        data-html="true"
                                        data-bind="tooltip: tooltip(), class: displayClass, hidden: $parent.showHiddenFiles()==false && hidden()==true">
                                        <span class="pull-left" data-bind="text: displayName"></span>
                                        <span class="pull-right">
                                            <span class="btn btn-xs btn-secondary"
                                                data-bind="click: $parent.editFile.bind($data, type, $index)">
                                                <span class="fa fa-edit"></span>
                                            </span>
                                            <span class="btn btn-xs btn-secondary" data-bind="click: hideFile">
                                                <span data-bind="class: hideFileClass" aria-hidden="true"></span>
                                            </span>
                                        </span>
                                    </span>
                                </div>
                                <div data-bind="hidden: files.pwads().length>0 || pwadsAllHidden()==false">
                                    No Pwads to display. It could be due to your search criteria, hidden files (you
                                    can click "show hidden files" to see them), or if you just copied files into the
                                    idTech folder, click the File Database tab to reload.
                                </div>
                            </div>
                            <div class="tab-pane container-fluid fade" id="Sourceports">
                                <div class="form-group">
                                    <input type="text" class="form-control" placeholder="Search..."
                                        data-bind="textInput: sourceportSearch, event: { keyup: findSourceport()}" />
                                </div>
                                <div class="list-group" data-bind="foreach: files.sourceports">
                                    <span class="list-group-item list-group-item-action" data-placement="right"
                                        data-html="true"
                                        data-bind="tooltip: tooltip(), class: displayClass, hidden: $parent.showHiddenFiles()==false && hidden()==true">
                                        <span class="pull-left" data-bind="text: displayName"></span>
                                        <span class="pull-right">
                                            <span class="btn btn-xs btn-secondary"
                                                data-bind="click: $parent.editFile.bind($data, type, $index)">
                                                <span class="fa fa-edit"></span>
                                            </span>
                                            <span class="btn btn-xs btn-secondary" data-bind="click: hideFile">
                                                <span data-bind="class: hideFileClass" aria-hidden="true"></span>
                                            </span>
                                        </span>
                                    </span>
                                </div>
                                <div data-bind="hidden: files.sourceports().length>0 || sourceportsAllHidden()==false">
                                    No Sourceports to display. It could be due to your search criteria, hidden files
                                    (you can click "show hidden files" to see them), or if you just copied files
                                    into the idTech folder, click the File Database tab to reload.
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-8 border border-secondary">
                        <form data-bind="with: chosenFile">
                            <h5>
                                File Type:
                                <span data-bind="text: type"></span>
                                &nbsp;&mdash;&nbsp;Filename:
                                <span data-bind="text: filename"></span>
                            </h5>
                            <div class="form-group">
                                <label class="col control-label" data-placement="left"
                                    data-bind="uniqueFor: name, tooltip: `A human readable name for your file.`">
                                    Title
                                </label>
                                <div data-bind="hidden: nameValid()" class="col alert alert-warning">
                                    <strong>Warning:</strong>
                                    You should provide a human-readable name for this file.
                                </div>
                                <input type="text" class="form-control" placeHolder="Human-readable name"
                                    data-bind="textInput: name, uniqueId: name, event: {blur: $parent.updateFile}" />
                            </div>
                            <div class="form-group" data-bind="visible: type()==='sourceport'">
                                <label class="col control-label" data-placement="left"
                                    data-bind="uniqueFor: sourceportType, tooltip: `This launcher has special support depending on the sourceport.  Selecting the right sourceport type here will greatly assist you later in building configurations based on that sourceport type.  Currently, the sourceport types this launcher supports are Zandronum, Chocolate Doom, and all ZDoom-based sourceports (e.g. GZDoom, QZDoom, or even plain ZDoom itself).`">
                                    Sourceport Type
                                </label>
                                <select class="form-control"
                                    data-bind="options: $parent.sourceportTypes, uniqueId: sourceportType, event: {blur: $parent.updateFile}, value: sourceportType, optionsCaption: 'Choose...'"></select>
                            </div>
                            <div class="form-group">
                                <label class="col control-label" data-placement="left"
                                    data-bind="uniqueFor: authorInput, tooltip: `Comma-separated list of authors.`">
                                    Authors
                                </label>
                                <div data-bind="hidden: authorsValid()" class="col alert alert-danger">
                                    <strong>Required:</strong>
                                    If you wish to use this file, you'll need to give credit to the person(s) who
                                    made it.
                                </div>
                                <input type="text" class="form-control" placeholder="Author1,Author2,Author3,..."
                                    data-bind="textInput: authorInput, uniqueId: authorInput, event: {blur: $parent.updateFile}" />
                            </div>
                            <div class="form-group">
                                <label class="col control-label" data-placement="left"
                                    data-bind="uniqueFor: metaInput, tooltip: `Comma-separated list of meta tags (kinda like hash tags, they're ways to find this file).`">
                                    Meta Tags
                                </label>
                                <div data-bind="hidden: metaTagsValid()" class="col alert alert-warning">
                                    <strong>Warning:</strong>
                                    It's extremely helpful to have some tags to use so you can find this file more
                                    easily, both here and in the Configuration Builder.
                                </div>
                                <input type="text" class="form-control"
                                    placeholder="Music,Levels,Textures,Gameplay,etc..."
                                    data-bind="textInput: metaInput, uniqueId: metaInput, event: {blur: $parent.updateFile}" />
                            </div>
                            <div class="form-group">
                                <label class="col control-label" data-placement="left"
                                    data-bind="uniqueFor: source, tooltip: `Where did you find this file?`">
                                    Source
                                </label>
                                <div data-bind="hidden: sourceValid()" class="col alert alert-danger">
                                    <strong>Required:</strong>
                                    You'll need to post a link as to where you got this file, or where this file can
                                    be found.
                                </div>

                                <input type="text" class="form-control" placeholder="http://somesite.com/someplace"
                                    data-bind="textInput: source, uniqueId: source, event: {blur: $parent.updateFile}" />
                            </div>
                            <div class="form-group">
                                <label class="col control-label" data-placement="left"
                                    data-bind="uniqueFor: quickDescription, tooltip: `Just a quick description of the file, not very long.  Just something that pops up real quick so you know more about it.`">
                                    Quick Description
                                </label>
                                <div data-bind="hidden: quickDescriptionValid()" class="col alert alert-warning">
                                    <strong>Warning:</strong>
                                    You really should provide a nice quick description. When you hover over the
                                    file, it'll pop up helping you remember what it does.
                                </div>

                                <input type="text" class="form-control col"
                                    placeholder="This file adds levels, music, sounds, textures, gameplay, etc. changes."
                                    data-bind="textInput: quickDescription, uniqueId: quickDescription, event: {blur: $parent.updateFile}" />
                            </div>
                            <div class="form-group">
                                <label class="col control-label" data-placement="left"
                                    data-bind="uniqueFor: longDescription, tooltip: `Here's where you can basically go nuts in long detail about the file.  Most files have a .txt packaged with them... this is a great place to paste that content (if your file comes with a .txt file of the same name, it'll get autoloaded into this field for you)`">
                                    Long Description
                                </label>
                                <textarea class="form-control" rows="20" placeholder="====== Blahblahblah=====
This is very long
oh my yes, this is going to be long.

Hello?  You still here?  yeah, long stuff in here..."
                                    data-bind="textInput: longDescription, uniqueId: longDescription, event: {blur: $parent.updateFile}"></textarea>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <div class="tab-pane container fade" id="info">
                <h1>Hello World!</h1>
                We are using node
                <span data-bind="text: nodeVersion"></span>
                <br />
                Chrome
                <span data-bind="text: chromeVersion"></span>
                <br />
                and Electron
                <span data-bind="text: electronVersion"></span>
                .
                <br />
                <br />
                You'll find the idTech folder in
                <span data-bind="text: idTechFolder"></span>
                <br />
                <a href="#" class="btn btn-secondary" data-bind="click: ()=>{ Allfiles([]); walk(idTechFolder)}">
                    Click to read in folders
                </a>
                <br />
                Here's all the files:
                <br />
                <div data-bind="foreach:Allfiles">
                    <div data-bind="text: $data"></div>
                </div>
                <br />
                And just to reiterate, their directories are:
                <br />
                Sourceports:
                <span data-bind="text: sourceportDirectory"></span>
                <br />
                Iwads:
                <span data-bind="text: iwadDirectory"></span>
                <br />
                Pwads:
                <span data-bind="text: pwadDirectory"></span>
            </div>
        </div>
    </div>
</body>

</html>